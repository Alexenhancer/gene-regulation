rule bed_to_fasta:
	"""Converts SRA files in fastq format with SRA toolkit. 
	
	TODO locally in workflow: 
		- import/merging local rule before conversion, as the output is in working dir by default (or consider including --outdir option)
		- rename files to sample name even if no merging (input & output files have the same name though sample & raw file can have different names eg. GSM vs SRR)
	
	Parameters required:
		config['qsub']
	Usage:
		SRA_TO_FASTQ = expand(config['dir']['results'] + "{dataset}/{file}.fastq", dataset=DATASETS, file=FILES)
	"""
	input: "{file}.sra"
	output: "{file}.fastq"
	log: "{file}_sra-conversion.log"
	benchmark: "{file}_sra-conversion_benchmark.json"
	params: qsub = config["qsub"] + " -q short -e {file}_sra-conversion_qsub.err -o {file}_sra-conversion_qsub.out"
	shell:"fastq-dump {input}  2> {log}"
