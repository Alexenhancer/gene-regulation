"""
	Rule to merge several raw read files (fastq format) sharing the same
	sample (GSM identifier).
"""

rule merge_short_reads:
    """Merge the raw short read files (SRR) belonging to the same sample (GSM)"""
    output: "{read_dir}/{gsm}/{gsm}_merged.fastq"
    params: qsub = QSUB_PARAM + " -e {read_dir}/{gsm}/{gsm}_merged_qsub.err -o {read_dir}/{gsm}/{gsm}_merged_qsub.out"
    log: "{read_dir}/{gsm}/{gsm}_merged.log"
    benchmark: "{read_dir}/{gsm}/{gsm}_merged_benchmark.json"
    message: "Merging short reads for sample {input}"
    shell: "ls -1 {wildcards.read_dir}/{wildcards.gsm}/SRR*.fastq | xargs cat > {output};"
