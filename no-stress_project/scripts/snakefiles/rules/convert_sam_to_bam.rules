"""
    =============================
    Definition of sam to bam rule
    =============================
"""

# rule convert_sam_to_bam_all:
#     """Convert each sample samfiles to bamfiles"""
#     input:expand('{read_dir}/{gsm}/{gsm}_bowtie.bam', gsm=GSM_LIST, read_dir=CHIP_READ_DIR)

rule sam_to_bam:
    input: "{reads}_bowtie2_mm" + MAX_MISMATCHES + ".sam"
    output: "{reads}_bowtie2_mm" + MAX_MISMATCHES + ".bam"
    log: "{reads}_bowtie2_mm" + MAX_MISMATCHES + "_sam_to_bam.log"
    benchmark: "{reads}_bowtie2_mm" + MAX_MISMATCHES + "_sam_to_bam_benchmark.json"
    params: qsub=QSUB_PARAM + " -q short -e {reads}_bowtie2_mm" + MAX_MISMATCHES + "_sam_to_bam_qsub.err -o {reads}_bowtie2_mm" + MAX_MISMATCHES + "_sam_to_bam_qsub.out"
    shell:"samtools view -bS -o {output} {input} 2> {log}"